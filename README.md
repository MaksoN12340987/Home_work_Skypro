# Проект домашней работы по реализации фукционала работы с банковскими данными


## Запуск проекта
Запустите следующую команду в терминале, находясь в корневой дирректории проекта, чтобы увидеть результат работы некоторых функций:
```
python .\__main__.py
```

### Требование для запуска:
- python - v3.12
- python-dotenv - v1.0.1
- requests - v2.32.3
- logging - v0.4.9.6


## Пакет src:
В модуле widget.py создана функция mask_account_card, которая принимает строку с именем держателя и номером карты или номер счёта и возвращает Имя держателя и замаскированный номер карты или номер счёта
Формат передачи:
*"Visa Platinum 7000792289606361"*
"Счет 73654108430135874305"

*Формат вывода:*
"Visa Platinum 7000 79** **** 6361"
"Счет **4305"

### Модуль src\utils.py 
Умеет конвертировать в объект Пайтон данные из файла по переданному пути в функцию:
- conversion_json_to_object

Также у этого модуля имеется функция ```transaction_amount```, которая принимает на вход словарь транзакции, определяет тип валюты и возвращает сумму транзакциию
Функция ```transaction_amount``` связана с модулем --Home_work_Skypro\src\external_api.py--

### Новый функционал сортировки

В пакете src появилась функця filter_by_state, которая принимает список словарей и опционально значение для ключа **state** (по умолчанию 'EXECUTED'). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ **state**
 соответствует указанному значению.


## Итеративный вывод

В пакет src добавлен модкль generators, в нем реализованны вункции:
- filter_by_currency принимает на вход список словарей, представляющих транзакции, а возвращает итератор, который поочередно выдает транзакции, где валюта операции соответствует заданной (например, USD)
- transaction_descriptions принимает список словарей с транзакциями и возвращает описание каждой операции по очереди
- card_number_generator, который выдает номера банковских карт в формате "XXXX XXXX XXXX XXXX", где X — цифра номера карты.


## Добавлено логирование модулей

По умолчанию, в файл .log выводятся информация о выполнении функции, а при возникновании ошибок, информация об ошибке и входные данные

Установка вровня логирования производится в каждом модуле, установив параметр:
```
.setLevel(logging.INFO)
```


## Тестирование 
В пакете test появились модули тестирования, каждый модуль, согласно названию, тестирует модули программы из пакета src

Для запуска тестирование требуется:
- библиотека pytest pytest = "^8.3.4"
- библиотека pytest-cov = "^6.0.0"

В корневом каталоге присутствует дирректория htmlcov, в которой располагается модуль index.html - в нем отражена статистика по тестированию проекта. А также появился модуль test\generators.py, он тестирует модуль src\generators.py
Ввведите:
```
pytest --cov
```
в виртуальном окружении корневого каталога программы, чтобы увидеть колличество тестов, статусы прохождения тестов и покрытие.


